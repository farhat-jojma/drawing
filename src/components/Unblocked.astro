---
import { getLangStaticPaths, resolveLang } from "../lib/i18n";

export async function getStaticPaths() {
  return getLangStaticPaths();
}

const locale = resolveLang(Astro.params.lang);
const dict = await import(`../locales/${locale}.json`).then((m) => m.default);
---

<section id="unblocked" class="relative w-full py-16 sm:py-20 overflow-hidden bg-indigo-50" lang={locale}>
  <div class="absolute inset-0 -z-10 crt-grid"></div>
  <div class="absolute inset-0 -z-10 mix-blend-multiply scanlines pointer-events-none"></div>

  <div class="max-w-6xl mx-auto px-4">
    <div class="inline-block px-3 py-1 mb-4 bg-black text-white border-2 border-white shadow-[4px_4px_0_#00f]">
      <span class="text-xs tracking-widest uppercase">{dict.unblocked}</span>
    </div>
    <h2 class="text-3xl sm:text-4xl font-extrabold mb-3 pixel-title text-black">{dict.unblockedTitle}</h2>
    <p class="max-w-3xl text-emerald-50/95 mb-8">{dict.unblockedSubtitle}</p>

    <div class="grid md:grid-cols-3 gap-6">
      <div class="bg-white p-6 border-[3px] border-black shadow-[8px_8px_0_#0ea5e9] -rotate-1">
        <div class="w-8 h-8 bg-emerald-400 border-2 border-black mb-4"></div>
        <h3 class="font-bold text-xl mb-2">{dict.unblockedCard1Title}</h3>
        <p class="text-gray-700">{dict.unblockedCard1Text}</p>
      </div>
      <div class="bg-white p-6 border-[3px] border-black shadow-[8px_8px_0_#f59e0b] rotate-1">
        <div class="w-8 h-8 bg-yellow-300 border-2 border-black mb-4"></div>
        <h3 class="font-bold text-xl mb-2">{dict.unblockedCard2Title}</h3>
        <p class="text-gray-700">{dict.unblockedCard2Text}</p>
      </div>
      <div class="bg-white p-6 border-[3px] border-black shadow-[8px_8px_0_#ef4444] -rotate-2">
        <div class="w-8 h-8 bg-pink-400 border-2 border-black mb-4"></div>
        <h3 class="font-bold text-xl mb-2">{dict.unblockedCard3Title}</h3>
        <p class="text-gray-700">{dict.unblockedCard3Text}</p>
      </div>
    </div>

    <div class="mt-8 flex flex-wrap items-center gap-3">
      <button onclick="document.getElementById('game').scrollIntoView({ behavior: 'smooth' })" 
        class="px-5 py-3 bg-yellow-300 hover:bg-yellow-400 transition-colors border-2 border-black shadow-[4px_4px_0_#000] active:translate-x-[2px] active:translate-y-[2px] font-semibold">
        {dict.unblockedCTA}
      </button>
      <button onclick="document.getElementById('tips').scrollIntoView({ behavior: 'smooth' })" 
        class="px-5 py-3 bg-white hover:bg-gray-100 transition-colors border-2 border-black shadow-[4px_4px_0_#000] active:translate-x-[2px] active:translate-y-[2px] font-semibold">
        {dict.unblockedCTA2}
      </button>
    </div>
  </div>

  <div class="pointer-events-none absolute inset-0 -z-10">
    <span class="pix-dot" style="top:8%;left:10%"></span>
    <span class="pix-dot" style="top:18%;right:14%"></span>
    <span class="pix-dot" style="bottom:14%;left:18%"></span>
    <span class="pix-dot" style="bottom:8%;right:12%"></span>
  </div>

  <style>
    .pixel-title {
      text-shadow: 0 0 0 #000, 2px 2px 0 #000, -2px 2px 0 #000;
      letter-spacing: .5px;
    }
    .crt-grid {
      background-image:
        linear-gradient(to right, rgba(0,0,0,.25) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(0,0,0,.25) 1px, transparent 1px),
        radial-gradient(circle at 20% 30%, rgba(16,185,129,.25), transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(59,130,246,.25), transparent 40%);
      background-size: 14px 14px, 14px 14px, 100% 100%, 100% 100%;
      background-position: 0 0, 0 0, 0 0, 0 0;
      background-color: transparent;
    }
    .scanlines { background: repeating-linear-gradient(to bottom, rgba(255,255,255,.05), rgba(255,255,255,.05) 1px, transparent 3px, transparent 4px); }
    .pix-dot { position:absolute; width:10px; height:10px; background:#fff; border:2px solid #000; box-shadow:2px 2px 0 #000; animation: blink 2s infinite steps(2); }
    @keyframes blink { 50% { opacity: .5; transform: translateY(-1px); } }
  </style>
</section>
